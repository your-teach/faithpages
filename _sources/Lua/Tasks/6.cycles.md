# Циклы


## while

## Сумма последовательности
Определите сумму всех элементов последовательности, завершающейся числом `0`. После запуска скрипта, пользователь вводит по очереди числа. Как только будет введен ноль, программа останавливается и выводит сумму всех предыдущих чисел. Примеры:
>Входные данные:  
>```txt
>1
>7
>9
>0
>```
>Выходные данные: `17`

>Входные данные:  
>```txt
>1
>1
>1
>1
>0
>```
>Выходные данные: `4`

````{toggle}
```lua
summa = 0
while true do
    number = tonumber(io.read())
    summa = summa + number
    if number == 0 then
        break
    end
end
print(summa)
```
````

## Реверс слова

Напишите программу, которая принимает слово от пользователя и переворачивает его. Пример:

> Входные данные: `'апельсин'`\
> Выходные данные: `'нисьлепа'`

````{toggle}
```lua
text = io.read()
i = #text
reverse = ''
while i > 0 do
    letter = text:sub(i, i)
    i = i - 1
    reverse = reverse .. letter
end
print(reverse)
```
````

## Реверс, если есть 'о'

Напишите программу, которая принимает строку и переворачивает ее в том случае, если в этой строке есть буква `o`. Иначе вывести значение `nil`. Примеры:

> Входные данные: `'остров'`\
> Выходные данные: `'вортсо'`

> Входные данные: `'рыба'`\
> Выходные данные: `nil`

## Палиндром

Напишите программу, которая проверяет, является ли строка палиндромом. (`Палиндром` - это слово или фраза, которые одинаково читаются слева направо и справа налево.)
Примеры:

> Входные данные: `"Заказ"`\
> Выходные данные: `"Yes"`

> Входные данные: `"Теплица"`\
> Выходные данные: `"No"`

## Количество четных чисел

Вводятся `N` чисел. Посчитайте, сколько среди них четных.\
**Входные данные**: На первой строке вводится одно число `N`. Далее вводятся столько чисел, сколько вы написали в первой строке, числом `N`.\
**Входные данные**: Выведите ответ на задачу.

Пример:

> Входные данные:
> 
> ```txt
> 4
> 10
> 11
> 12
> 13
> ```
> 
> Выходные данные: `2`

````{toggle}
```lua
n = tonumber(io.read())
k = 0
score = 1
while score <= n do
    x = tonumber(io.read())
    if x % 2 == 0 then
        k = k + 1
    end
    score = score + 1
end
print(k)
```
````

````{toggle}
```lua
n = tonumber(io.read())
k = 0
for i = 1, n do
    x = tonumber(io.read())
    if x % 2 == 0 then
        k = k + 1
    end
end
print(k)
```
````

## Маша и телефон

Маша хочет накопить на новый телефон. Телефон стоит `N` рублей. Маша может откладывать `K` рублей в день каждый день, за исключением воскресенья, когда она тратит деньги на поход в кино. Маша начинает копить в понедельник. За сколько дней она накопит нужную сумму?\
**Входные данные**: Вводятся два числа `N` и `K`.\
**Входные данные**: Выведите искомое количество дней

Примеры:

> Входные данные: `100 50`\
> Выходные данные: `2`

> Входные данные: `100 10`\
> Выходные данные: `11`

````{toggle}
```lua
enter = io.read()
i = string.find(enter, ' ')
n = enter:sub(1, i - 1)
k = enter:sub(i + 1)
n, k = tonumber(n), tonumber(k)
day = 1
s = 0
while s < n do
    if day % 7 ~= 0 then
        s = s + k
    end
    day = day + 1
end
print(day - 1)
```
````

## for

## Первый-второй-первый

В классе `N` школьников. На уроке физкультуры тренер говорит «на первый-второй рассчитайтесь».
Выведите, что скажут ученики.\
**Входные данные**: Вводится одно целое число — количество человек в классе.\
**Входные данные**: Выведите последовательность чисел `1` и `2`, в том порядке, как будут говорить школьники.
Пример:

> Входные данные: `5`\
> Выходные данные:
> 
> ```
> 1
> 2
> 1
> 2
> 1
> ```

````{toggle} 
```lua
n = tonumber(io.read())
for i = 1, n do
    if i % 2 == 1 then
        print(1)
    else
        print(2)
    end
end
```
````

````{toggle} 
```lua
n = tonumber(io.read())
score = 1
while score <= n do
    if score % 2 == 1 then
        print(1)
    else
        print(2)
    end
    score = score + 1
end
```
````

## От нуля до n

Пользователь вводит число `n`. Далее необходимо, чтобы программа начала перечислять числа от `0` до `n`.
Если число `n` меньше нуля, то отсчет идет в соответствующую сторону, от нуля к минусовым значениям: `0, -1, -2, -3` и т.д. Если больше нуля, то: `0, 1, 2, 3` и т.д. Примеры:

> Входные данные: `8`\
> Выходные данные: `0,1,2,3,4,5,6,7,8`

> Входные данные: `-3`\
> Выходные данные: `0,-1,-2,-3`

````{toggle}
```lua
n = -10
if n > 0 then step = 1
else step = -1 end

for x = 0, n, step do
    print(x)
end

-- альтернативное условие, с тернарным оператором:
step = n > 0 and 1 or -1
```
````

## Пирамида

Напишите программу для построения следующего шаблона, используя циклы:

```
* 
* * 
* * * 
* * * * 
* * * * * 
* * * * 
* * * 
* * 
*
```

````{toggle}
```lua
stars = '*'
for i = 1, 10 do
    print(stars)
    if i <= 5 then
        stars = stars .. '*'
    else
        stars = stars:sub(1, string.len(stars) - 1)
    end
end
```
````

## Сортировка таблицы по убыванию
Напишите программу, которая сортирует произвольную таблицу по убыванию. Пример:

>Входная таблица: `{39, 5, 1, -7, 2, 0, 81, 3}`\
Выходная таблица: `{81, 39, 5, 3, 2, 1, 0, -7}`

````{toggle}
```lua
s = {1,3,4,2,0,-3}
table.sort(s)
s2 = {}
for i = #s, 1, -1 do
    table.insert(s2, s[i])
end

for k,v in ipairs(s2) do
    print(k,v)
end
```
````

## Отбор ключей таблицы
Напишите программу, которая отбирает из таблицы-словаря только ключи этой тыблицы. Результаты поместить в новую таблицу. Пример:

>Входная таблица: `{['life']='жизнь', ['more']='больше', ['permanent']='постоянный'}`\
Выходные данные: `{'life', 'more', 'permanent'}`

## Отбор значений таблицы
Напишите программу, которая отбирает из таблицы-словаря только значения этой тыблицы. Результаты поместить в новую таблицу. Пример:

>Входная таблица: `{-1 = 'lower', 0 = 'middle', 1 = 'high'}`\
Выходные данные: `{'lower', 'middle', 'high'}`

## Удаление дубликатов

Пользователь вводит через пробел произвольные данные, необходимо удалить дубликаты этих данных. Пример:

> Входные данные: `лес огород солнце очки лес имя очки`\
> Выходные данные: `лес огород солнце очки имя`

````{toggle}
```lua
words = "лес огород солнце очки лес имя очки"
dict = {}
next = ""
for i = 1, #words+1 do
    letter = words:sub(i, i)
    -- letter = "",
    -- потому что при чтении несуществуюего индекса будет пустая строка
    if letter == " " or letter == "" then
        table.insert(dict, next)
        next = ""
    else
        next = next .. letter
    end
end
-- dict = {'лес', 'огород', 'солнце', 'очки', 'лес', 'имя', 'очки'}
dict_sorted = {}
new_words = ''
for key, value in ipairs(dict) do
    can = true
    for k, v in ipairs(dict_sorted) do
        if value == v then
            can = false
            break
        end
    end
    if can then
        space = ' '
        -- чтобы пробел не добавился в конец
        if key == #dict then space = '' end
        table.insert(dict_sorted, value)
        new_words = new_words .. value .. space
    end
end
print(new_words)
```
````

## Цифра 3 в таблице

Дана произвольная таблица с числами.
Напишите программу, которая выводит `'YES'`, если в таблице присутствует цифра `3`, иначе выводится `'NO'`. Примеры:

> Таблица: `{9, 10, 3, -4, 7, 93}`\
> Ожидаемый результат: `YES`

> Таблица `{41,6,32}`\
> Ожидаемый результат: `NO`

## Cумма от 1 до N

Посчитайте сумму `1 + 2 + 3 + ... + N`.\
**Входные данные**: Вводится одно целое число \
**Входные данные**: Выведите искомую сумму.

Примеры:

> Входные данные: `2`\
> Выходные данные: `3`

> Входные данные: `5`\
> Выходные данные: `15`

````{toggle}
```lua
n = tonumber(io.read())
k = 0
for i = 1, n do
    k = k + i
end
print(k)
```
````

## Буква алфавита

Пользователю предлагается ввести один символ. Нужно выяснить, входит ли символ в русский или английский алфавит, если да, то написать в какой. Примеры:

> Входные данные: `'П'`\
> Выходные данные: `'Буква русского алфавита'`

> Входные данные: `'j'`\
> Выходные данные: `'Буква английского алфавита'`

> Входные данные: `'&'`\
> Выходные данные: `'Символ не входит в рус/англ алфавиты'`

````{toggle} Решение #1
```lua
languages = {}
languages.rus = {
"й", "ц", "у", "к", "е", "н", "г", 
"ш", "щ", "з", "х", "ъ",
"ф", "ы", "в", "а", "п", "р", "о", "л", "д", "ж", "э", "я","ч", "с", "м", "и", "т", "ь", "б", "ю", "ё"}
languages.eng = {
"q", "w", "e", "r", "t", "y", "u", "i", "o", "p", "a", "s","d", "f", "g", "h", "j", "k", "l", "z", "x", "c", "v", "b", "n", "m"}

letter = 'з'
result = 'Символ не входит в рус/англ алфавиты'

for lang, letters in pairs(languages) do
    for key, value in pairs(letters) do
        if letter == value then
            if lang == 'rus' then
                result = 'Буква русского алфавита'
            else
                result = 'Буква английского алфавита'
            end
            stop = true
            break
        end
    end
    if stop then break end
end
print(result)
```
````

````{toggle} Решение #2
```lua
letter = 't'
if (letter >= 'а' and letter <= 'я' or
        letter >= 'А' and letter <= 'Я') then
    print('rus')
elseif (letter >= 'a' and letter <= 'z' or
            letter >= 'A' and letter <= 'Z') then
    print('eng')
end
```
````

## Собираемся в поход

```lua
things = {['зажигалка']=20, ['компас']=100, ['фрукты']=500, ['рубашка']=300,
          ['термос']=1000, ['аптечка']=200, ['куртка']=600, ['бинокль']=400,
        ['удочка']=1200, ['салфетки']=40, ['бутерброды']=820, ['палатка']=5500,
        ['спальный мешок']=2250, ['жвачка']=10}
```

Турист собирается в поход. Он сможет нести `N` кг вещей. Но вещей, которые он запланировал уложить в рюкзак, оказалось намного больше. Нужно определить, какие вещи от наиболее тяжелых к самым легким поместятся в рюкзак. Пример:

> Входные данные: `10`\
> Выходные данные:
> 
> ```
> палатка
> спальный мешок
> удочка
> термос
> салфетки
> жвачка
> ```

Этапы решения данного упражнения:
1. Создать таблицу в которой будут лежать числа из таблицы things. Пример:\
`{20, 100, 500, ...}`
2. Отсортировать  новую таблицу с числами, по убыванию. Пример:\
`{5500, 2250, 1000, ...}`
3. Поменять местами ключи и значения первоначальной таблицы things. Пример:\
`{20='зажигалка', 100='компас', 500='фрукты', ...}`
4. Итоговый цикл, который перебирает вещи и выводит те, которые вмещаются в рюкзак.

````{toggle}
```lua
things = {
    ['зажигалка']=20, ['компас']=100, ['фрукты']=500, ['рубашка']=300,
    ['термос']=1000, ['аптечка']=200, ['куртка']=600, ['бинокль']=400,
    ['удочка']=1200, ['салфетки']=40, ['бутерброды']=820, ['палатка']=5500,
    ['спальный мешок']=2250, ['жвачка']=10
}
N = io.read() * 1000
-- 1. Создаем таблицу только цифр из таблицы things
only_nums = {}
for k,v in pairs(things) do
    table.insert(only_nums, v)
end

-- 2. Сортируем таблицу с числами по возрастанию
table.sort(only_nums) 
-- Сортируем таблицу с числами по убыванию
things_sorted = {}
for x = #only_nums, 1, -1 do
    table.insert(things_sorted, only_nums[x])
end

-- 3. Cделаем свап таблицы things, чтобы мы находили, например по ключу 5500 -> 'палатку'
things_swap = {}
for k,v in pairs(things) do
    things_swap[v] = k
end

-- Здесь итоговый цикл, который перебирает отсортированную таблицу, проводит вычисление, и выводит нужные вещи
sm = 0
for k, v in pairs(things_sorted) do
    if sm + v <= N then
        print(things_swap[v])
        sm = sm + v
    end
end

-- Вывод всех элементов таблицы
-- for k,v in pairs(things_sorted) do
--     print(k, v)
-- end
```
````