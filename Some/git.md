# Git

## Команды

`git init` - инициилизация репозитория  
`git add .` - добавить измененные/новые файлы в индекс (staging area) для следующего коммита  
`git add path/to/file` - можно точечно (или убрать `git restore --staged file .`)  
`git commit -m "Описание изменений"` - коммит  
`git push origin main` - отправка файлов на удаленную ветку main  
`git pull --rebase` - если удаленная история отличается — возможен отказ пуша; использовать перед push (вроде) или согласовать изменения  
`git pull origin main` - получение загрузка новых коммитов к себе (git pull = git fetch + git merge)  
`git branch` - посмотреть все ветки репозитория  
`git branch -m main` - переименовать локальную ветку в main  
`git fetch` - загружает новые данные (коммиты, файлы и ссылки) из удаленного репозитория в локальный, но не объединяет их существующими файлами  


# SSH для GitHub/GitLab/Bitbucket
**Создание ключа и привязка**  
Проверить наличие SSH-ключа  
`ls -al ~/.ssh`  
Обычно ключи называются id_rsa и id_rsa.pub или id_ed25519 и id_ed25519.pub.  

Создать новый ключ (если нет)   
`ssh-keygen -t ed25519 -C "your_email@example.com"`  

Запустить фоновый процесс ssh-agent, который хранит расшифрованные ключи в памяти и предоставляет их клиентам SSH.  
`eval "$(ssh-agent -s)"`  
Загрузить приватный ключ в ssh-agent, чтобы не вводить пароль при каждом соединении.  
`ssh-add ~/.ssh/id_ed25519`  

Скопировать публичный полученный ключ и добавить его в GitHub/GitLab → SSH Keys  
`cat ~/.ssh/id_ed25519.pub`  

После добавления ключа можно клонировать репозиторий по SSH:  
`git clone git@github.com:username/repository.git .`  

**Работа с коммитами**  
Добавить изменения:  
`git add .`  
Сделать коммит:  
`git commit -m "Описание изменений"`  
Отправить изменения в удалённый репозиторий:  
`git push origin main`  
Чтобы обновить локальную копию:  
`git pull origin main`  
 
## Слияние репозиториев  
Если в папке имеются файлы, и нужны еще и клонировать новый репозиторий  

Инициализация: `git init`  
Привязка удаленного репозитория: `git remote add origin <ссылка>`  
Получение данных: `git fetch`  
Принудительное слияние: `git reset --hard origin/main` ( это затрет локальные файлы с такими же именами, как в репозитории).  
Далее:  
`git add .`  
`git commit -m "commit name"`  
`git branch -m main` - изменить название локальной ветки на main  

`git push origin main` - теперь можно пушить  
`git pull origin main --rebase` - или (это объединит ваши файлы с файлами из облака, не удаляя их.)  